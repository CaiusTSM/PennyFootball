<html>
	<head>
		<meta charset="utf-8">
	    <meta name="viewport" content="width=device-width">
	    <meta name="description" content="Penny Football Project">
	  	<meta name="author" content="Agile Team 2">
    	<title>Penny Football | Welcome</title>
		<script src="/jquery.js"></script>
		<script src="/socket.io.js"></script>
		<script src="/socket.js"></script>
		<script src="/reload-client.js"></script>
		<script>
			$(document).ready(function() {
				// Add button event listeners
				$('#loginForm').submit(submitLoginForm);
				
				$('#registerForm').submit(submitRegisterForm);
			});
			
			function submitLoginForm(e) {
				e.preventDefault();
				
				login($('#loginUsername').val(), $('#loginPassword').val(), function(status, data) {
					if (status === 200) {
						console.log("Login success...");
						window.location = "/user/home.html";
					}
					else if (status === 401) {
						console.log("Login failure...");
						$('#loginForm').append("<br><font color='red'>Incorrect username/password.</font>");
					}
				});
			}
			
			function submitRegisterForm(e) {
				e.preventDefault();
					
				register($('#registerUsername').val(), $('#registerPassword').val(), function(status, data) {
					if (status === 200) {
						console.log("Register success...");
						$('#registerForm').append("<br><font color='green'>Register success.</font>");
						
						// login($('#registerUsername').val(), $('#registerPassword').val(), function(status, data) {
						// 	if (status === 200) {
						// 		console.log("Login success...");
						// 		window.location = "/user/home.html";
						// 	}
						// 	else if (status === 401) {
						// 		console.log("Login failure...");
						// 		$('#loginForm').append("<br><font color='red'>Incorrect username/password.</font>");
						// 	}
						// } Doesn't seem to work yet.
					}
					else if (status === 400) {
						console.log("Register failure...");
						$('#registerForm').append("<br><font color='red'>Invalid username/password.</font>");
					}
				});
			}
			
			// Reusable, can be put in their own file like api.js or something (contains all functions for making calls to the server)
			function login(username, password, callback) {
					$.ajax({
						url:'/api/login',
						type:'POST',
						data: {
							username: username,
							password: password
						},
						success: function() {
							callback(200, null);
						},
						error: function(data) {
							callback(data.status, data);
						}
					});
			}
			
			function register(username, password, callback) {
				$.ajax({
					url:'/api/register',
					type:'POST',
					data: {
						username: username,
						password: password
					},
					success: function() {
						callback(200, null);
					},
					error: function(data) {
						callback(data.status, data);
					}
				});
			}
		</script>
		<style>
			.button1{
				height:20px;
				padding-left: 20px;
				padding-right:20px;
			}
			
			.credentials{
				float: left;
			}
			
			.credentials section{
				width: 30%;
				float: left;
				padding: 40px;
			}
			
		</style>
	</head>
	<body>
		<header>
	      <div>
	        <div>
	          <h1>Penny Football</h1>
	        </div>
	      </div>
	    </header>
	    
	    <section class="credentials">
	    	
		    <section id="login">
		    	<div>
		    		<h1>Login</h1>
		    		<form id="loginForm">
		    			<input id="loginUsername" type="text" placeholder="Username"><br>
		    			<input id="loginPassword" type="password" placeholder="Password"><br>
		    			<input type="submit" class="button1" value="Login"></button>
		    		</form>
		    	</div>
		    </section>
		    
		    <section id="register">
		    	<div>
		    		<h1>Register</h1>
		    		<form id="registerForm">
		    			<input id="registerUsername" type="text" placeholder="Username"><br>
		    			<input id="registerPassword" type="password" placeholder="Password"><br>
		    			<input type="submit" class"button1" value="Register"></button>
		    		</form>
		    	</div>
		    </section>
		    
	    </section>
	</body>
</html>
